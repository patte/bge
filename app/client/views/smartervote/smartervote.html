<template name="smartervote">
  <div id="smartervote">
    <div id="app-header">
      <img src="/img/sv-logo-horizontal.svg" alt="smartervote">  <button type="button" class="site-menu-toggle">Men√º</button>
      {{> languageSwitcher}}
    </div>
    
    <div id="bubbles-container"></div>
    
    <button type="button" id="mobile-content-toggle"><i class="fa fa-eye"></i></button>
    <div id="content">
      {{#if showEvaluation}}
        {{> evaluation}}
      {{else}}
        {{> question}}
      {{/if}}
    </div>

    <div id="score-gauge" style="bottom: {{proPercentGauge}}%">
      <span>{{proPercent}}%</span>
    </div>
    
    <div id="smartervote-modal">
      <p><a href="#" class="toggle-about pull-right">Schliessen</a></p>
      <h1 id="myModalLabel">Alle Fragen &amp; Informationen</h1>
      {{#each questions}}
        <h2>{{index}}. {{label}}</h2>
        <p>{{#markdown}}{{info}}{{/markdown}}</p>
      {{/each}}
        <p><a href="#" class="toggle-about">Schliessen</a></p>
    </div>

  </div>
</template>

<template name="question">
  <div id="question">
    {{#with question=question}}
      <div id="header">
        <span class="sr-only">{{_ "question"}} </span><span id="question-index">{{index}}</span>
        <button type="button" id="toggle-favorite" class="btn {{favoriteActive}}"><span class="sr-only">{{_ "favorite"}}</span></button>
        <a id="show-all-questions" class="toggle-about" href="/smartervote-content" target="_blank">{{_ "questionOverview"}}</a>
        <span id="mobile-score">{{proPercent}}% pro</span>
        <br>
        
        
        <label for={{question._id}} class="control-label">
          {{{question.label}}}
        </label>
        {{#if question.info}}
          <div class="info">
            {{#if showInfo}}
            <div class="hideInfo">
              {{#markdown}}{{question.info}}{{/markdown}}
              <br><a href="#">{{_ "lessInformation"}}</a>
            </div>
            {{else}}
            <a href="#" class="showInfo">{{_ "moreInformation"}} <b class="caret"></b></a>
            {{/if}}
          </div>
        {{/if}}
      </div>

      <div class="footer">
        <div class="answers control-section">
          <button type="button" class="max {{answerButtonActive true}} btn btn-default">
            <span>{{maxLabel}}</span>
            {{maxLabelAffix}}
          </button>
          <br>
          <button type="button" class="min {{answerButtonActive false}} btn btn-default">
            <span>{{minLabel}}</span>
            {{minLabelAffix}}
          </button>
        </div>
        {{> slider}}
        
        <div id="question-navigation" class="control-section">
          <button type="button" id="back" class="btn btn-default"><span>{{_ "back"}}</span></button>
          <button type="button" id="gotoEvaluation" class="btn btn-default">{{_ "evaluation"}}</button>
          <button type="button" id="next" class="btn btn-default"><span>{{_ "next"}}</span></button>
        </div>
        
        <button type="button" id="reset" class="btn btn-danger">{{_ "deleteAllAnswers"}}</button>
      </div>
    {{/with}}
  </div>
</template>

<template name="slider">
  <div class="at-nouislider control-section">
    <div class="nouislider-container">
      <span class="nouislider-label">{{_ "totalyIrrelevant"}}</span>
      <div id="nouislider" class="nouislider"></div>
      <span class="nouislider-label">{{_ "veryImportant"}}</span>
    </div>
  </div>
</template>


<template name="evaluation">
<div id="evaluation">
  <div id="question-navigation" class="control-section">
    <button type="button" id="gotoQuestions" class="btn btn-default">{{_ "gotoQuestions"}}</button>
  </div>
  
  <div class="final-score">
    <h2>{{_ "yourScore"}}:</h2>
    <span>{{proPercent}}% pro</span>
  </div>

  <div class="sharing">
    {{#with visit=visit}}
    <h2>{{_ "shareYourScore"}}:</h2>
    <div class="preview-wrapper">
      <div class="share-buttons-wrapper">
        {{>shareit shareData}}
        <a class="url-copy" href="/myBubbles/{{visit._id}}" target='_blank'><i class="fa fa-link"></i></a>
      </div>
      <img id="mybubbles-preview" title="Rechts klicken, um das Bild herunterzuladen">
    </div>
    {{/with}}
  </div>
	
  {{#if showCreateAccount}}
  <div class="account">
    <h2>{{_ "createAccount"}}:</h2>
    {{> loginButtons}}
  </div>
  {{/if}}

  <div class="topics">
    <h2>{{_ "whereDoYouStand"}}</h2>
    {{#each topics}}
    <button type="button" class="topic {{topicCSS}} btn btn-default">
      <strong>{{title}}</strong> ({{pp}} %) 
    </button>
    {{/each}}
  </div>
  
  <div class="compare">
    <h2>{{_ "compareScoreWith"}}:</h2>
    <button type="button" class="person-of-interest {{personCSS}} btn btn-default">
      <strong>Viktor Giaciobbo</strong> (55% pro)
    </button>
    <button type="button" class="person-of-interest {{personCSS}} btn btn-default">
      <strong>Loulou von Brochwitz</strong> (61% pro)
    </button>
  </div>
</div>
</template>
